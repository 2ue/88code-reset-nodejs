# Render éƒ¨ç½²æŒ‡å—

> **å®˜æ–¹ç½‘ç«™**: [render.com](https://render.com) | **å®˜æ–¹æ–‡æ¡£**: [render.com/docs](https://render.com/docs) | **Blueprint æ–‡æ¡£**: [render.com/docs/blueprint-spec](https://render.com/docs/blueprint-spec)

Render æä¾› 750å°æ—¶/æœˆå…è´¹é¢åº¦ï¼Œæ”¯æŒ Blueprint é…ç½®æ–‡ä»¶è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚

---

## âœ¨ ç‰¹ç‚¹

- âœ… 750å°æ—¶/æœˆå…è´¹é¢åº¦
- âœ… æ”¯æŒ Blueprint é…ç½®æ–‡ä»¶
- âœ… è‡ªåŠ¨æ£€æµ‹ Dockerfile
- âœ… GitHub è‡ªåŠ¨éƒ¨ç½²
- âš ï¸ æŒä¹…åŒ–å­˜å‚¨éœ€ä»˜è´¹

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹å¼1: Blueprint è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

é¡¹ç›®å·²åŒ…å« `render.yaml` é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä¸€é”®éƒ¨ç½²ã€‚

#### 1. æ³¨å†Œè´¦å·

è®¿é—® [render.com](https://render.com) æ³¨å†Œè´¦å·

#### 2. ä½¿ç”¨ Blueprint

1. åœ¨ Render Dashboard ç‚¹å‡» **"New +"**
2. é€‰æ‹© **"Blueprint"**
3. è¿æ¥ä½ çš„ GitHub ä»“åº“
4. é€‰æ‹© `88code-reset-nodejs` ä»“åº“
5. Render è‡ªåŠ¨è¯»å– `render.yaml` å¹¶åˆ›å»ºæœåŠ¡

#### 3. é…ç½®ç¯å¢ƒå˜é‡

Blueprint ä¼šè‡ªåŠ¨åˆ›å»ºæœåŠ¡ï¼Œä½†æ•æ„Ÿç¯å¢ƒå˜é‡éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼š

1. ç‚¹å‡»åˆ›å»ºçš„æœåŠ¡
2. è¿›å…¥ **Environment** æ ‡ç­¾é¡µ
3. æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

```env
API_KEYS=88_your_key_here,88_another_key_here
API_BASE_URL=https://api.88code.com
```

#### 4. é‡æ–°éƒ¨ç½²

ç¯å¢ƒå˜é‡è®¾ç½®åï¼Œç‚¹å‡» **Manual Deploy** â†’ **Deploy latest commit**

---

### æ–¹å¼2: æ‰‹åŠ¨åˆ›å»ºæœåŠ¡

å¦‚æœä¸ä½¿ç”¨ Blueprintï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼š

#### 1. åˆ›å»ºæ–°æœåŠ¡

1. ç‚¹å‡» **"New +"** â†’ **"Background Worker"**
2. è¿æ¥ GitHub ä»“åº“
3. é€‰æ‹© `88code-reset-nodejs` ä»“åº“

#### 2. é…ç½®æœåŠ¡

**åŸºæœ¬é…ç½®**ï¼š
- **Name**: `88code-reset-nodejs`
- **Runtime**: `Docker`
- **Branch**: `main`
- **Dockerfile Path**: `./Dockerfile`

**ç¯å¢ƒå˜é‡**ï¼š
æ·»åŠ å¿…éœ€çš„ç¯å¢ƒå˜é‡ï¼ˆåœ¨ Environment æ ‡ç­¾é¡µï¼‰ï¼š

```env
API_KEYS=88_your_key_here,88_another_key_here
API_BASE_URL=https://api.88code.com
NODE_ENV=production
TZ=Asia/Shanghai
```

#### 3. éƒ¨ç½²

ç‚¹å‡» **"Create Background Worker"**ï¼ŒRender ä¼šï¼š
- è‡ªåŠ¨å…‹éš†ä»£ç 
- ä½¿ç”¨ Dockerfile æ„å»ºé•œåƒ
- å¯åŠ¨å®¹å™¨
- ç›‘æ§å¥åº·çŠ¶æ€

---

## âš™ï¸ render.yaml é…ç½®è¯´æ˜

é¡¹ç›®å·²åŒ…å« `render.yaml` é…ç½®æ–‡ä»¶ï¼š

```yaml
services:
  - type: worker
    name: 88code-reset-nodejs
    runtime: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .

    # ç¯å¢ƒå˜é‡ï¼ˆéœ€è¦åœ¨ Render Dashboard ä¸­é…ç½®æ•æ„Ÿä¿¡æ¯ï¼‰
    envVars:
      - key: NODE_ENV
        value: production
      - key: TZ
        value: Asia/Shanghai
      - key: API_BASE_URL
        sync: false  # éœ€è¦æ‰‹åŠ¨åœ¨ Dashboard ä¸­è®¾ç½®
      - key: API_KEYS
        sync: false  # éœ€è¦æ‰‹åŠ¨åœ¨ Dashboard ä¸­è®¾ç½®ï¼ˆå¤šä¸ªkeyç”¨é€—å·åˆ†éš”ï¼‰

    # è‡ªåŠ¨éƒ¨ç½²
    autoDeploy: true

    # åˆ†æ”¯éƒ¨ç½²
    branch: main
```

**é…ç½®è¯´æ˜**ï¼š
- `type: worker`: åå°ä»»åŠ¡ç±»å‹ï¼ˆä¸å¯¹å¤–æä¾›HTTPæœåŠ¡ï¼‰
- `runtime: docker`: ä½¿ç”¨ Docker è¿è¡Œæ—¶
- `sync: false`: æ•æ„Ÿä¿¡æ¯ä¸ä»æ–‡ä»¶åŒæ­¥ï¼Œéœ€æ‰‹åŠ¨è®¾ç½®

---

## ğŸ’¾ æŒä¹…åŒ–å­˜å‚¨

âš ï¸ **æ³¨æ„**: Render çš„æŒä¹…åŒ–å­˜å‚¨éœ€è¦ä»˜è´¹è®¡åˆ’ã€‚

### é…ç½®æŒä¹…åŒ–ç£ç›˜ï¼ˆä»˜è´¹ï¼‰

å¦‚æœéœ€è¦æŒä¹…åŒ–æ—¥å¿—å’Œæ•°æ®ï¼Œåœ¨ `render.yaml` ä¸­å–æ¶ˆæ³¨é‡Šï¼š

```yaml
disk:
  name: data
  mountPath: /app/data
  sizeGB: 1
```

æˆ–åœ¨ Dashboard ä¸­æ‰‹åŠ¨æ·»åŠ ï¼š
1. æ‰“å¼€æœåŠ¡è®¾ç½®
2. è¿›å…¥ **Disks** æ ‡ç­¾é¡µ
3. ç‚¹å‡» **Add Disk**
4. é…ç½®æŒ‚è½½è·¯å¾„å’Œå¤§å°

---

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹æ—¥å¿—

1. åœ¨ Render Dashboard ä¸­æ‰“å¼€æœåŠ¡
2. ç‚¹å‡» **Logs** æ ‡ç­¾é¡µ
3. æŸ¥çœ‹å®æ—¶æ—¥å¿—è¾“å‡º

æˆ–ä½¿ç”¨æœç´¢åŠŸèƒ½ï¼š
- æœç´¢ç‰¹å®šæ—¥æœŸ
- è¿‡æ»¤é”™è¯¯æ—¥å¿—
- å¯¼å‡ºæ—¥å¿—æ–‡ä»¶

### æŸ¥çœ‹éƒ¨ç½²å†å²

1. ç‚¹å‡» **Events** æ ‡ç­¾é¡µ
2. æŸ¥çœ‹æ‰€æœ‰éƒ¨ç½²ã€é‡å¯ã€æ‰©å®¹äº‹ä»¶
3. å¯ä»¥å›æ»šåˆ°ä»»æ„å†å²ç‰ˆæœ¬

### æ‰‹åŠ¨é‡å¯

1. ç‚¹å‡» **Manual Deploy** â†’ **Clear build cache & deploy**
2. æˆ–ç›´æ¥ç‚¹å‡» **Restart Service**

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### éƒ¨ç½²å¤±è´¥

**æŸ¥çœ‹æ„å»ºæ—¥å¿—**ï¼š
1. Logs æ ‡ç­¾é¡µ
2. é€‰æ‹© **Build Logs**
3. æŸ¥æ‰¾é”™è¯¯ä¿¡æ¯

**å¸¸è§é—®é¢˜**ï¼š
- Dockerfile è·¯å¾„é”™è¯¯
- ä¾èµ–å®‰è£…å¤±è´¥
- ç¯å¢ƒå˜é‡ç¼ºå¤±

**è§£å†³æ–¹æ³•**ï¼š
```bash
# ç¡®è®¤ Dockerfile è·¯å¾„
./Dockerfile  # åº”è¯¥åœ¨é¡¹ç›®æ ¹ç›®å½•

# ç¡®è®¤ç¯å¢ƒå˜é‡
åœ¨ Environment æ ‡ç­¾é¡µæ£€æŸ¥ API_KEYS æ˜¯å¦å·²è®¾ç½®
```

### è¿è¡Œæ—¶é”™è¯¯

**æŸ¥çœ‹è¿è¡Œæ—¥å¿—**ï¼š
1. Logs æ ‡ç­¾é¡µ
2. æŸ¥çœ‹ **Service Logs**
3. æœç´¢ ERROR å…³é”®å­—

**æ£€æŸ¥ç¯å¢ƒå˜é‡**ï¼š
```bash
# åœ¨ Environment æ ‡ç­¾é¡µç¡®è®¤
API_KEYS - å·²è®¾ç½® âœ…
API_BASE_URL - å·²è®¾ç½® âœ…
```

### åº”ç”¨é¢‘ç¹é‡å¯

**åŸå› **ï¼š
- å†…å­˜ä¸è¶³ï¼ˆOOMï¼‰
- å¥åº·æ£€æŸ¥å¤±è´¥
- åº”ç”¨å´©æºƒ

**è§£å†³æ–¹æ³•**ï¼š
1. å‡çº§åˆ°æ›´å¤§çš„å®ä¾‹ç±»å‹
2. æ£€æŸ¥ä»£ç æ˜¯å¦æœ‰å†…å­˜æ³„æ¼
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ Blueprint

ä½¿ç”¨ `render.yaml` å¯ä»¥ï¼š
- ç‰ˆæœ¬æ§åˆ¶é…ç½®
- å¿«é€Ÿé‡å»ºç¯å¢ƒ
- å›¢é˜Ÿåä½œæ–¹ä¾¿

### 2. ç¯å¢ƒå˜é‡ç®¡ç†

**æ•æ„Ÿä¿¡æ¯**ï¼š
```yaml
# render.yaml
envVars:
  - key: API_KEYS
    sync: false  # ä¸ä»æ–‡ä»¶åŒæ­¥ï¼Œæ‰‹åŠ¨è®¾ç½®
```

**éæ•æ„Ÿä¿¡æ¯**ï¼š
```yaml
# render.yaml
envVars:
  - key: NODE_ENV
    value: production  # ç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶
```

### 3. è‡ªåŠ¨éƒ¨ç½²é…ç½®

```yaml
autoDeploy: true  # æ¨é€ä»£ç è‡ªåŠ¨éƒ¨ç½²
branch: main      # ç›‘æ§çš„åˆ†æ”¯
```

### 4. é€šçŸ¥è®¾ç½®

åœ¨ Settings â†’ Notifications ä¸­é…ç½®ï¼š
- éƒ¨ç½²æˆåŠŸ/å¤±è´¥é€šçŸ¥
- æœåŠ¡åœæœºé€šçŸ¥
- å‘é€åˆ°é‚®ç®±æˆ– Slack

### 5. ç›‘æ§æ—¥å¿—

å®šæœŸæ£€æŸ¥æ—¥å¿—ï¼š
```
Logs â†’ Filter by level â†’ ERROR
```

---

## ğŸ’° è´¹ç”¨è¯´æ˜

### å…è´¹é¢åº¦

- **750å°æ—¶/æœˆ** å…è´¹è¿è¡Œæ—¶é—´
- é€‚åˆè½»é‡çº§åå°ä»»åŠ¡
- è‡ªåŠ¨ä¼‘çœ æœºåˆ¶ï¼ˆWorker ä¸é€‚ç”¨ï¼‰

### è®¡è´¹æ–¹å¼

**Background Worker è®¡è´¹**ï¼š
- Starter: $7/æœˆï¼ˆ512MB å†…å­˜ï¼‰
- Standard: $25/æœˆï¼ˆ2GB å†…å­˜ï¼‰

**æŒä¹…åŒ–å­˜å‚¨**ï¼š
- 1GB SSD: $1/æœˆ

### å…è´¹è®¡åˆ’è¯´æ˜

å¯¹äº 88code-reset-nodejsï¼š
- é¢„è®¡æ¯æœˆä½¿ç”¨ **720å°æ—¶**ï¼ˆ24Ã—30å¤©ï¼‰
- å®Œå…¨åœ¨ 750å°æ—¶å…è´¹é¢åº¦å†… âœ…
- æ— éœ€æŒä¹…åŒ–å­˜å‚¨ï¼ˆæ—¥å¿—å¯è¾“å‡ºåˆ°æ§åˆ¶å°ï¼‰

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### 1. ç¦ç”¨æŒä¹…åŒ–å­˜å‚¨

å¦‚æœä¸éœ€è¦ä¿å­˜å†å²æ•°æ®ï¼Œå¯ä»¥ï¼š
- æ³¨é‡Šæ‰ `render.yaml` ä¸­çš„ `disk` é…ç½®
- æ—¥å¿—ä»…è¾“å‡ºåˆ°æ§åˆ¶å°
- é™ä½æˆæœ¬

### 2. ä½¿ç”¨ç¯å¢ƒå˜é‡æ§åˆ¶æ—¥å¿—

```env
LOG_LEVEL=info
LOG_TO_FILE=false  # ä¸å†™æ–‡ä»¶ï¼Œä»…æ§åˆ¶å°
```

### 3. ç›‘æ§èµ„æºä½¿ç”¨

åœ¨ Dashboard ä¸­ç›‘æ§ï¼š
- CPU ä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- é‡å¯æ¬¡æ•°

å¦‚æœèµ„æºä¸è¶³ï¼Œè€ƒè™‘å‡çº§å®ä¾‹ã€‚

---

## ğŸ“š ç›¸å…³èµ„æº

- [Render å®˜æ–¹æ–‡æ¡£](https://render.com/docs)
- [Blueprint é…ç½®å‚è€ƒ](https://render.com/docs/blueprint-spec)
- [Background Worker æ–‡æ¡£](https://render.com/docs/background-workers)
- [é¡¹ç›®é…ç½®æ–‡ä»¶](../render.yaml)
